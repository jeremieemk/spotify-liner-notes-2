{"ast":null,"code":"import { useEffect, useState } from \"react\";\nexport default function useSpotifyData(accessToken) {\n  const {\n    0: spotifyData,\n    1: setSpotifyData\n  } = useState(null);\n  useEffect(() => {\n    fetchCurrentTrack(accessToken, setSpotifyData);\n  }, []);\n\n  function fetchCurrentTrack(accessToken, setSpotifyData) {\n    const nowPlayingApiUrl = \"https://api.spotify.com/v1/me/player\";\n    console.log(\"inside function\", accessToken);\n    fetch(nowPlayingApiUrl, {\n      headers: {\n        Authorization: \"Bearer \" + accessToken\n      }\n    }).then(response => {\n      if (response.status === 204 || response.status === 401) {\n        console.log(\"manage error\");\n      } else {\n        return response.json();\n      }\n    }).then(data => {\n      setSpotifyData(data.item);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  return spotifyData;\n}","map":{"version":3,"sources":["/Users/jeremie/web/44_spotify-liner-notes2.0/pages/api/useSpotifyData.js"],"names":["useEffect","useState","useSpotifyData","accessToken","spotifyData","setSpotifyData","fetchCurrentTrack","nowPlayingApiUrl","console","log","fetch","headers","Authorization","then","response","status","json","data","item","catch","error"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAEA,eAAe,SAASC,cAAT,CAAwBC,WAAxB,EAAqC;AAClD,QAAM;AAAA,OAACC,WAAD;AAAA,OAAcC;AAAd,MAAgCJ,QAAQ,CAAC,IAAD,CAA9C;AACAD,EAAAA,SAAS,CAAC,MAAM;AACZM,IAAAA,iBAAiB,CAACH,WAAD,EAAcE,cAAd,CAAjB;AACH,GAFQ,EAEN,EAFM,CAAT;;AAIA,WAASC,iBAAT,CAA2BH,WAA3B,EAAwCE,cAAxC,EAAwD;AACtD,UAAME,gBAAgB,GAAG,sCAAzB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BN,WAA/B;AACAO,IAAAA,KAAK,CAACH,gBAAD,EAAmB;AACpBI,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAE,YAAYT;AAA7B;AADW,KAAnB,CAAL,CAGKU,IAHL,CAGWC,QAAD,IAAc;AACpB,UAAIA,QAAQ,CAACC,MAAT,KAAoB,GAApB,IAA2BD,QAAQ,CAACC,MAAT,KAAoB,GAAnD,EAAwD;AACpDP,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACH,OAFD,MAEO;AACH,eAAOK,QAAQ,CAACE,IAAT,EAAP;AACH;AACA,KATL,EAUKH,IAVL,CAUWI,IAAD,IAAU;AAChBZ,MAAAA,cAAc,CAACY,IAAI,CAACC,IAAN,CAAd;AACC,KAZL,EAaKC,KAbL,CAaW,UAAUC,KAAV,EAAiB;AACxBZ,MAAAA,OAAO,CAACC,GAAR,CAAYW,KAAZ;AACC,KAfL;AAgBC;;AAED,SAAOhB,WAAP;AACH","sourcesContent":["import { useEffect, useState } from \"react\";\n\nexport default function useSpotifyData(accessToken) {\n  const [spotifyData, setSpotifyData] = useState(null);\n  useEffect(() => {\n      fetchCurrentTrack(accessToken, setSpotifyData)\n  }, []);\n\n  function fetchCurrentTrack(accessToken, setSpotifyData) {\n    const nowPlayingApiUrl = \"https://api.spotify.com/v1/me/player\";\n    console.log(\"inside function\", accessToken)\n    fetch(nowPlayingApiUrl, {\n        headers: { Authorization: \"Bearer \" + accessToken },\n    })\n        .then((response) => {\n        if (response.status === 204 || response.status === 401) {\n            console.log(\"manage error\")\n        } else {\n            return response.json();\n        }\n        })\n        .then((data) => {\n        setSpotifyData(data.item);\n        })\n        .catch(function (error) {\n        console.log(error);\n        });\n    }\n  \n    return spotifyData\n}"]},"metadata":{},"sourceType":"module"}